<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.pearl.mapper.MainMapper">
  
 <select id="get" resultType="com.pearl.mapper.MainMapper">
			select*from board where boardNum=#{boardNum}	
	</select>	

  <select id="rank" resultType="com.pearl.mapper.MainMapper">
  	<![CDATA[select a.* from 
  	(
  	SELECT boardNum, COUNT(EMOEXPRESS),ROW_NUMBER() OVER 
  	(ORDER BY count(EMOEXPRESS=${EMOEXPRESS}) DESC
  	)
  	 AS RANK FROM EMOTION GROUP BY BOARDNUM=${BOARDNUM}) a where a.rank <=3 ]]>
  	
  </select> 
  
  <select id="writer" resultType="com.pearl.mapper.MainMapper">
			select e.memnum, m.memname from emotion e, member m where m.memnum=${memNum} = e.memnum=${memNum};	
	</select>	
  
  </mapper>