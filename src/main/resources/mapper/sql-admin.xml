<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pearl.mapper.AdminMapper">

	<select id="boardList"
		resultType="com.pearl.domain.AdminBoardVO">
		select /*+INDEX(board board_pk)*/
		b.boardNum, b.boardTitle,
		b.memNum, m.memName, m.memEmail, b.boardDate
		from member m, board b
		where b.boardtype = 'c' and b.memNum = m.memNum
	</select>

	 <select id="test" resultType="com.pearl.domain.MemberVO">
	 select rownum rn, m.*
		from member m
		where rownum between  #{firstRecordIndex} and #{lastRecordIndex}
	</select>

	<select id="fundList" resultType="com.pearl.domain.AdminFundVO">
		select /*+INDEX(fund fund_pk)*/
		f.fundNum, m.memNum, m.memName, m.memEmail, f.fundStartDate,
		f.fundEndDate, f.fundMoney, f.fundTitle, fundIntro
		from member m, fund
		f
		where f.memNum = m.memNum
	</select>

	<select id="paymentList"
		resultType="com.pearl.domain.AdminPaymentVO">
		select /*+INDEX(payment payment_pk)*/
		*
		from payment
	</select>

	<select id="searchPaymentList"
		resultType="com.pearl.domain.AdminPaymentVO">
		select /*+INDEX(payment payment_pk)*/
		*
		from payment
		<if test="searchType == 'all'">
		
		</if>
		<if test="searchType == 'payNum'">
			where payNum = #{searchValue}
		</if>
		<if test="searchType == 'memNum'">
			where memNum = #{searchValue}
		</if>
		<if test="searchType == 'fundNum'">
			where fundNum = #{searchValue}
		</if>
	</select>




	<delete id="fundDelete">
		DELETE FROM fund
		<where>
			<foreach item="fundNum" index="index" collection="array"
				open="fundNum IN (" close=")" separator=",">
				#{fundNum}
			</foreach>
		</where>
	</delete>

	<delete id="memberDelete">
		DELETE FROM member
		<where>
			<foreach item="memNum" index="index" collection="array"
				open="memNum IN (" close=")" separator=",">
				#{memNum}
			</foreach>
		</where>
	</delete>

	<delete id="postDelete">
		DELETE FROM board
		<where>
			<foreach item="boardNum" index="index" collection="array"
				open="boardNum IN (" close=")" separator=",">
				#{boardNum}
			</foreach>
		</where>
	</delete>

</mapper>